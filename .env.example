# =====================================================
# üöÄ DevFlow Configuration - Example Template
# =====================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to git (it's already in .gitignore)
# =====================================================

# =====================================================
# üåç Environment
# =====================================================
NODE_ENV=development
LOG_LEVEL=info
SERVICE_NAME=devflow
SERVICE_VERSION=1.12.0

# =====================================================
# üåê API Configuration
# =====================================================
API_PORT=3000
API_HOST=0.0.0.0
API_GLOBAL_PREFIX=api/v1
CORS_ORIGIN=*

# =====================================================
# üóÑÔ∏è Database (PostgreSQL)
# =====================================================
DATABASE_URL=postgresql://devflow:changeme@localhost:5432/devflow?schema=public
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=devflow
DATABASE_USER=devflow
DATABASE_PASSWORD=changeme
DATABASE_SSL=false

# =====================================================
# üî¥ Redis Cache
# =====================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =====================================================
# ‚è±Ô∏è Temporal Workflow Engine
# =====================================================
TEMPORAL_ADDRESS=localhost:7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=devflow

# =====================================================
# üìã Linear Integration (Task Management)
# =====================================================
# Linear now uses OAuth per-project. No API key needed here.
# Connect via: POST /api/v1/auth/linear/device/initiate
LINEAR_WEBHOOK_SECRET=your_webhook_secret

# Status that triggers workflow (when issue moves to this status)
LINEAR_TRIGGER_STATUS=To Spec

# Status to set after workflow starts
LINEAR_NEXT_STATUS=Spec Ready

# =====================================================
# üêô GitHub Integration (VCS + CI/CD)
# =====================================================
# GitHub now uses OAuth per-project. No token needed here.
# Connect via: POST /api/v1/auth/github/device/initiate
# Required scopes: repo, workflow, admin:repo_hook
GITHUB_WEBHOOK_SECRET=

# Default Repository for DevFlow
# This repo will be automatically used for spec/code generation
# Format: owner/repo (e.g., facebook/react)
DEFAULT_REPO_OWNER=your-github-username
DEFAULT_REPO_NAME=your-repo-name
DEFAULT_REPO_URL=https://github.com/your-username/your-repo

# =====================================================
# üî¥ Sentry Integration (Error Monitoring)
# =====================================================
# Sentry now uses OAuth per-project. No DSN needed here.
# Connect via: POST /api/v1/auth/sentry/authorize
# Required scopes: org:read, project:read, event:read, project:write, member:read
# Full setup guide: .docs/SENTRY_OAUTH_SETUP.md

# =====================================================
# üé® Figma Integration (Design Context)
# =====================================================
# Figma uses OAuth per-project.
# Connect via: POST /api/v1/auth/figma/authorize
# Required scopes: file_read, file_comments:read

# =====================================================
# üì¢ Notification Integrations
# =====================================================

# Slack
# Create webhook at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR_WORKSPACE/YOUR_CHANNEL/YOUR_SECRET_TOKEN

# Discord
# Create webhook in Discord Server Settings ‚Üí Integrations ‚Üí Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/XXXXXXXXXXXXXXXXXX/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# =====================================================
# üìß Email/SMTP Configuration
# =====================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=app_specific_password
SMTP_FROM=noreply@devflow.ai

# =====================================================
# üíæ Storage Configuration
# =====================================================
# Options: local, s3
STORAGE_TYPE=local
STORAGE_PATH=./storage

# AWS S3 (if STORAGE_TYPE=s3)
S3_BUCKET=devflow-artifacts
S3_REGION=us-east-1
S3_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE
S3_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# =====================================================
# üîê Security & Authentication
# =====================================================
JWT_SECRET=changeme-use-strong-random-string-min-32-chars
JWT_EXPIRES_IN=24h
API_KEY_HEADER=X-API-Key

# OAuth Token Encryption (REQUIRED for OAuth)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
OAUTH_ENCRYPTION_KEY=

# =====================================================
# üö¶ Rate Limiting
# =====================================================
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# =====================================================
# üìä SLA & Monitoring Thresholds
# =====================================================
# Workflow Duration Thresholds (in seconds)
SLA_WORKFLOW_DURATION_SECONDS=3600
SLA_SPEC_DURATION_SECONDS=300
SLA_CODE_DURATION_SECONDS=600
SLA_CI_DURATION_SECONDS=1800
SLA_AGENT_LATENCY_SECONDS=120

# Cost & Budget Thresholds
SLA_LLM_DAILY_COST_USD=50.0
SLA_BUDGET_REMAINING_PERCENT=10.0

# Quality Thresholds
SLA_TEST_SUCCESS_RATE=90.0
SLA_COVERAGE_THRESHOLD=80.0
SLA_WORKFLOW_FAILURE_RATE=10.0

# =====================================================
# üîç Observability (Optional)
# =====================================================
# OpenTelemetry Collector
OTEL_COLLECTOR_URL=http://localhost:4318

# =====================================================
# üñ•Ô∏è CLI Integration (Optional)
# =====================================================
# Used by @devflow/cli to connect to the API
DEVFLOW_API_URL=http://localhost:3000/api/v1
DEVFLOW_API_TOKEN=
DEVFLOW_API_KEY=

# =====================================================
# üìù Notes & Setup Links
# =====================================================
#
# üîó Quick Links:
# - OAuth Setup: POST /api/v1/auth/{provider}/device/initiate
# - Slack Webhooks: https://api.slack.com/messaging/webhooks
#
# üìö Documentation:
# - Full setup guide: ./README.md
# - User guide: ./USER_GUIDE.md
# - Manual testing: ./MANUAL_TESTING_GUIDE.md
#
# ‚ö†Ô∏è Security Best Practices:
# 1. Never commit this file with real values to git
# 2. Use strong, random strings for JWT_SECRET (min 32 chars)
# 3. Rotate tokens regularly
# 4. Use environment-specific .env files (.env.dev, .env.prod)
# 5. Consider using a secrets manager (AWS Secrets Manager, Vault, etc.)
#
# =====================================================
